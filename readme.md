# MoexClient

Версия: 1.3

Класс для работы с Московской биржей (MOEX) через публичный ISS API.

Позволяет получать:
- Исторические данные по акциям и другим инструментам (сегодняшний и прошлый периоды, разные интервалы свечей)
- Текущие котировки выбранного инструмента
- Список ценных бумаг на заданном рынке

---

## Методы

### `get_history(start: str, end: str, interval: str = "1d") -> pd.DataFrame`

Получить исторические данные по инструменту.

- `start`: дата начала периода в формате "YYYY-MM-DD"
- `end`: дата конца периода в формате "YYYY-MM-DD"
- `interval`: интервал свечей. Возможные: `"1d"` (дневные), `"1h"`, `"10m"`, `"1m"`

Возвращает `pandas.DataFrame` с колонками:
- `TIMESTAMP` — дата и время сделки
- `PRICE` — цена закрытия
- `VOLUME` — объем

---

### `get_data() -> Dict`

Получить текущую котировку инструмента.

Возвращает словарь с ключами:
- `ticker` — тикер инструмента
- `price` — цена (float, или `nan` если недоступна)
- `time` — время котировки (строка ISO)
- `volume` — объем

---

### `get_securities_list(market: str = "shares") -> pd.DataFrame`

Получить список ценных бумаг на указанном рынке.

- `market`: название рынка (по умолчанию `"shares"`)

Возвращает `pandas.DataFrame` с данными.

---

### `process_history(history: pd.DataFrame) -> pd.DataFrame`

Обработать исторические данные. 

Возвращает `pandas.DataFrame` с колонками:
- `TIMESTAMP` — дата и время сделки
- `PRICE` — цена закрытия
- `VOLUME` — объем
- `RET` — доходности
- `LOGRET` — логдоходности
- `CUMRET` — кумулятивные доходности

---

### `history_stats(history: pd.DataFrame, risk_free_rate: float = 0.0) -> dict`

Рассчитать ключевые финансовые метрики на основе исторических доходностей.

**Возвращает** `dict` с ключевыми показателями:
- `mean_ret` — средняя доходность
- `volatility` — стандартное отклонение доходностей (волатильность)
- `sharpe` — коэффициент Шарпа
- `sortino` — коэффициент Сортино
- `cumulative_return` — кумулятивная доходность за весь период
- `max_drawdown` — максимальная просадка
- `skew` — коэффициент асимметрии доходностей
- `kurtosis` — коэффициент эксцесса доходностей

---

### `plot(self, history: pd.DataFrame)`

Нарисовать график цены и объема